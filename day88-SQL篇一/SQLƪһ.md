```### æ­¤èµ„æºç”± 58å­¦è¯¾èµ„æºç«™ æ”¶é›†æ•´ç† ###
	æƒ³è¦è·å–å®Œæ•´è¯¾ä»¶èµ„æ–™ è¯·è®¿é—®ï¼š58xueke.com
	ç™¾ä¸‡èµ„æº ç•…äº«å­¦ä¹ 

```


# 1.MySQlæ ¸å¿ƒSQLè¯­å¥

æµ‹è¯•æ•°æ®

```
SQLç»ƒä¹ ï¼Œå¯ä»¥å…ˆå¯¼å…¥è¶…å“¥å‡†å¤‡å¥½çš„æ•°æ®åº“æ–‡ä»¶ã€‚

https://github.com/datacharmer/test_db   éšæ„å¯¼å…¥ï¼Œç»ƒä¹ SQLç©æ³•


è¿˜æœ‰ä¸ª yuanlai_mysql.sql


```



## å¯¼å…¥ï¼Œæ¢å¤mysqlæ•°æ®çš„æ–¹å¼

![1659422719803](pic/1659422719803.png)



```
mysqlçš„å¤‡ä»½ï¼Œæ¢å¤
å°±æ˜¯ä¿©è¿‡ç¨‹
1. å¤‡ä»½ï¼Œå°†å½“å‰çš„æ•°æ®åº“ï¼Œè¡¨ï¼Œæ•°æ®ï¼Œå…¨éƒ¨å¯¼å‡ºä¸ºä¸€ä¸ªsqlçš„æ–‡ä»¶

2. æ¢å¤ï¼ŒåŸç†å°±æ˜¯ï¼Œå‡†å¤‡ ä¸€ä¸ªæ–‡ä»¶ï¼Œï¼Œé‡Œé¢æ˜¯å¤§é‡çš„ï¼Œåˆ›å»ºåº“ï¼Œåˆ›å»ºè¡¨ï¼Œæ’å…¥æ•°æ®çš„SQLè¯­å¥è€Œå·²ï¼Œé‡æ–°æ‰§è¡Œä¸€ä¸‹



1.  bashå‘½ä»¤è¡Œç›´æ¥å¯¼å…¥
[root@tech-db-51 ~]#mysql -uroot -plinux3306   <  /root/all_world.sql 
mysql: [Warning] Using a password on the command line interface can be insecure.
[root@tech-db-51 ~]#
[root@tech-db-51 ~]#
[root@tech-db-51 ~]#mysql -uroot -plinux3306 -e "show databases;"



2. mysqlç¯å¢ƒä¸­ï¼Œç”¨sourceè¯­å¥å»å¯¼å…¥

mysql> source  /root/test_db-master/employees.sql;

# æŸ¥çœ‹è¯¥æ•°æ®åº“çš„ åˆ›å»ºåº“çš„è¯­å¥
# å¾ˆå¤šç°æˆçš„åº“ï¼Œè¡¨ï¼Œæ•°æ®ï¼Œéƒ½å¯¼å‡ºä¸º,SQLè¯­å¥ ï¼ˆæ‹¿åˆ°SQLï¼Œå°±è¡¨ç¤ºå¯ä»¥åˆ›é€ æ•°æ®äº†ï¼‰
mysql> SHOW CREATE DATABASE employees;
+-----------+----------------------------------------------------------------------+
| Database  | Create Database                                                      |
+-----------+----------------------------------------------------------------------+
| employees | CREATE DATABASE `employees` /*!40100 DEFAULT CHARACTER SET latin1 */ |
+-----------+----------------------------------------------------------------------+
1 row in set (0.00 sec)


# è¿™æ˜¯ç³»ç»Ÿæœ€ç»ˆæ‰§è¡Œçš„SQLè¯­å¥
CREATE DATABASE `employees` /*!40100 DEFAULT CHARACTER SET latin1 */

# ç®€å†™ 
#/*!40100  æ˜¯mysqlè‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Šç¬¦ï¼Œä¸ºäº†å†ä¸é€šmysqlç‰ˆæœ¬ä¹‹é—´ï¼Œè®©SQLå…¼å®¹æ€§æ›´å¼ºï¼Œå†ä¸é€šçš„å­—ç¬¦é›†ä¸‹
#  latin1 ä¸è¯†åˆ«ä¸­æ–‡
#  utf8 è¯†åˆ«ä¸­æ–‡

CREATE DATABASE  employees  DEFAULT   CHARACTER SET  latin1;




```



![1659423387552](pic/1659423387552.png)



SQLï¼Œè‹±æ–‡å…¨ç§°ä¸ºStructured Query Languageï¼Œä¸­æ–‡æ„æ€æ˜¯ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œå®ƒæ˜¯ä¸€ç§å¯¹å…³ç³»å‹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œå®šä¹‰å’Œæ“ä½œçš„è¯­è¨€ï¼Œæ˜¯å¤§å¤šæ•°å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ‰€æ”¯æŒçš„å·¥ä¸šæ ‡å‡†è¯­è¨€ã€‚

å°±åƒæˆ‘ä»¬å’Œbashæ‰“äº¤é“ï¼Œè¦éµå¾ªbashçš„è¯­æ³•ï¼Œç„¶åå¯ä»¥å¯¹linuxçš„æ•°æ®ï¼Œè¿›è¡Œå¢åˆ æ”¹æŸ¥ã€‚

æˆ‘ä»¬ä½¿ç”¨mysqlè¿™ä¸ªå·¥å…·ï¼Œè¿›è¡Œæ•°æ®ç®¡ç†ï¼Œå°±å¾—éµå¾ªSQLä¸“é—¨çš„è¯­æ³•ï¼Œè¿›è¡Œå­˜å‚¨ã€æŸ¥è¯¢ã€æ›´æ–°ã€ç®¡ç†æ•°æ®åº“å†…å®¹ã€‚

SQLå¸®åŠ©æˆ‘ä»¬ä¸ç”¨å…³æ³¨æ•°æ®åˆ°åº•æ˜¯æ€ä¹ˆåœ¨ç£ç›˜ä¸Šå­˜å‚¨çš„ï¼Œé€šè¿‡é«˜çº§SQLè¯­è¨€ï¼Œèƒ½å¤Ÿéå¸¸ç®€å•çš„å¯¹æ•°æ®ç®¡ç†ï¼Œä»¥åŠå¼ºå¤§çš„çµæ´»æ€§ï¼Œä¸åŒçš„æ•°æ®åº“çš„SQLä¼šæœ‰äº›å·®åˆ«ã€‚

```
ç”¨äºå…³ç³»å‹æ•°æ®åº“ï¼Œmysqlè¿™ä¸ªè½¯ä»¶ä¸­ä¸“æœ‰çš„æŸ¥æ•°æ®çš„è¯­è¨€ï¼Œå«åšç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ã€‚
```



# 2.æœ‰å…³SQLçš„åˆ†ç±»

```
DDLæ•°æ®å®šä¹‰ï¼Œå…¨ç§°ä¸ºData Definition Language

DQLæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼ŒDQLï¼Œå…¨ç§°ä¸ºData Query Language

DCLæˆæƒæ§åˆ¶,å…¨ç§°ä¸ºData Control Language

DMLæ•°æ®æ“ä½œè¯­è¨€ï¼ŒDMLï¼Œå…¨ç§°ä¸ºData Manipulation Languageï¼Œä¸­æ–‡ä¸ºæ•°æ®æ“ä½œè¯­è¨€
```



# 1.æŸ¥çœ‹å››å¤§SQLåˆ†ç±»çš„ä»‹ç»



## DQLæ•°æ®æŸ¥è¯¢è¯­è¨€

DQLï¼Œå…¨ç§°ä¸ºData Query Languageï¼Œå…¶è¯­å¥ä¹Ÿç§°ä¸ºâ€œæ•°æ®æ£€ç´¢è¯­å¥â€ï¼Œä½œç”¨æ˜¯`ä»è¡¨ä¸­è·å–æ•°æ®ï¼Œç¡®å®šæ•°æ®åº”æ€æ ·åœ¨åº”ç”¨ç¨‹åºä¸­ç»™å‡ºã€‚`

å…³é”®å­—SELECTæ˜¯DQLï¼ˆä¹Ÿæ˜¯æ‰€æœ‰SQLï¼‰ç”¨å¾—æœ€å¤šçš„ï¼Œå…¶ä»–DQLå¸¸ç”¨çš„ä¿ç•™å­—æœ‰WHEREã€ORDER BYã€GROUP BYå’ŒHAVINGã€‚

```
æŸ¥è¯¢
selectå…³é”®å­—

æŸ¥æ•°æ®ï¼Œå„ç§ä¸°å¯Œçš„æŸ¥è¯¢å§¿åŠ¿ï¼Œæ’åºæŸ¥è¯¢ï¼Œåˆ†ç»„æŸ¥è¯¢ï¼Œè¿‡æ»¤æŸ¥è¯¢ï¼Œ
WHEREã€ORDER BYã€GROUP BYå’ŒHAVINGã€‚
```



è¿™äº›å•è¯å°±æ˜¯æˆ‘ä»¬è¿™ä¸€èŠ‚è¦å­¦ä¹ çš„SQLè¯­å¥ï¼Œè¿›è¡ŒæŸ¥è¯¢ã€‚

è¿™äº›DQLä¿ç•™å­—å¸¸ä¸å…¶ä»–ç±»å‹çš„SQLè¯­å¥ä¸€èµ·ä½¿ç”¨ã€‚å…·ä½“è¯­å¥ç¤ºä¾‹å¦‚ä¸‹ï¼š

```
select user,host from mysql.user order by user;

SELECT  USER();
SELECT DATABASE();

çœ‹æ¥select æŸ¥è¯¢ï¼Œå¯ä»¥æŸ¥è¯¢è¡¨æ•°æ®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç»“åˆå†…ç½®å‡½æ•°æŸ¥çœ‹ä¸€äº›æ•°æ®ï¼›

```



![1659423806067](pic/1659423806067.png)



## DMLæ•°æ®æ“ä½œè¯­è¨€

DMLï¼Œå…¨ç§°ä¸ºData Manipulation Languageï¼Œä¸­æ–‡ä¸ºæ•°æ®æ“ä½œè¯­è¨€ã€‚

å…¶è¯­å¥çš„å…³é”®å­—ä¸º`INSERTã€UPDATEå’ŒDELETE`ã€‚å®ƒä»¬åˆ†åˆ«ç”¨äºæ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤è¡¨ä¸­çš„è¡Œï¼ˆæ•°æ®ï¼‰ã€‚

```
å•è¯å¾ˆå¤šè‡ªå·±ï¼ŒåŠ æ²¹

insert æ’å…¥è¡¨æ•°æ®
update æ›´æ–°è¡¨æ•°æ®
delete åˆ é™¤è¡¨æ•°æ®

```



![1659424349239](pic/1659424349239.png)



## æ³¨æ„å¤§å‘ï¼Œdeleteï¼Œupdateï¼Œå¯¹è¡¨æ•°æ®çš„è¡Œè¿›è¡ŒåŒ¹é…æ“ä½œ

```
åˆ ï¼Œåˆ å“ªä¸€è¡Œæ•°æ®ï¼Ÿ
æ›´æ–°ï¼Œæ›´æ–°å“ªä¸€è¡Œæ•°æ®

```



å…·ä½“è¯­å¥ç¤ºä¾‹å¦‚ä¸‹ï¼š

```


delete from mysql.user where user=' ';

delete from mysql.user where user='root' and host='mysql-server56';

delete from mysql.user where user='root' and host='::1';

select user,host from mysql.user order by user;



```







--ç»§ç»­äº†



## TPLäº‹åŠ¡

å…¨ç§°ä¸ºTransaction Processing Languageï¼ŒTPLè¯­å¥ç”¨äºç¡®ä¿è¢«DMLè¯­å¥å½±å“çš„è¡¨çš„æ‰€æœ‰è¡Œèƒ½å¤ŸåŠæ—¶å¾—åˆ°æ›´æ–°ã€‚

TPLè¯­å¥åŒ…æ‹¬BEGIN TRANSACTIONã€COMMITå’ŒROLLBACKã€‚

```
mysqlä¸»æµé»˜è®¤å¼•æ“æ˜¯INNODBå¼•æ“ï¼Œé»˜è®¤æ•°æ®å˜åŠ¨çš„æ“ä½œï¼Œéƒ½æ˜¯äº‹åŠ¡æ“ä½œï¼Œå…·ä½“ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Œå­¦åˆ°æ•°æ®å¤‡ä»½ï¼Œæ—¥å¿—æ—¶å€™å†å»ç¢ç£¨ã€‚


```





## DCLæˆæƒæ§åˆ¶

å…¨ç§°ä¸ºData Control Languageï¼Œè¿™ç±»è¯­å¥é€šè¿‡GRANTæˆ–REVOKEæˆæƒç”¨æˆ·è®¸å¯ï¼Œç¡®å®šå•ä¸ªç”¨æˆ·å’Œç”¨æˆ·ç»„å¯¹æ•°æ®åº“å¯¹è±¡çš„è®¿é—®ã€‚

æŸäº›RDBMSå¯ç”¨GRANTæˆ–REVOKEæ§åˆ¶å¯¹è¡¨ä¸­å•ä¸ªåˆ—çš„è®¿é—®ã€‚

ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šä¸€èŠ‚å­¦ä¹ çš„grantè¯­å¥

```
create user pyyu@'%' identified by 'pyyu668';
show grants for pyyu@'%';
 grant select on luffy.* to 'pyyu'@'%' with grant option;
 show grants for pyyu@'%';
 
 

```







## ----è¿ç»´å’Œå¼€å‘--SQL-----

![1659425841326](pic/1659425841326.png)



> è¿ç»´ä¸»è¦å…³å¿ƒæ•°æ®åº“çš„æ¶æ„ç»´æŠ¤ã€æ•°æ®å¤‡ä»½ã€åŸºç¡€æ•°æ®çš„ç®¡ç†ã€ä½†æ˜¯ä¸€èˆ¬ä¸ä¼šä¿®æ”¹æ•°æ®è¡¨çš„ç»“æ„
>
> å…¬å¸ä¼šæœ‰ç ”å‘æ€»ç›‘ï¼ŒCTO
>
> æ•°æ®åº“ï¼Œè¡¨æ ¹æ®ä¸šåŠ¡æ¥çš„ï¼Œç”µå•†ï¼Œåšå®¢ç±»ç½‘ç«™ï¼Œå°ç¨‹åºç­‰
>
> æ•°æ®è¡¨çš„è®¾è®¡ï¼Œéå¸¸å¤æ‚ï¼Œéœ€è¦CTOå»å®šä¹‰è¡¨ä¸è¡¨çš„å…³ç³»ï¼Œç„¶åäº¤ç»™å¼€å‘å°å¼Ÿå»å†™ä»£ç ï¼Œ
>
> æ•°æ®çš„å¢åˆ æ”¹æŸ¥
>
> å†™ä»£ç ï¼Œå†™äº†ä¸€ä¸ªç½‘ç«™çš„åŠŸèƒ½ï¼Œã€‚æ–¹ä¾¿ç”¨æˆ·
>
> åœ¨é¡µé¢ä¸Šï¼ŒæŸ¥è¯¢å•†å“ï¼Œ----select æ•°æ®è¡¨çš„è¡Œè®°å½• ã€‚ã€‚ã€‚ã€‚
>
> å†é¡µé¢ä¸Šï¼Œå‘è¡¨åšå®¢ï¼Œ-=--æ•°æ®è¡¨å¤šè¡Œè®°å½•ã€‚ã€‚ã€‚
>
> 
>
> ç”¨æˆ·å‘è¡¨æ–‡ç«  > è§¦å‘å‰ç«¯çš„è¯·æ±‚ > ç½‘é¡µä¸­æŸä¸€ä¸ªæ¡†é‡Œå†™çš„æ•°æ®ï¼Œè¢«å‰ç«¯æ„é€ ä¸ºäº†æ•°æ®ç±»å‹
>
> â†“
>
> å‘ç»™åç«¯è¯­è¨€æ¡†æ¶ï¼Œphpï¼Œpythonï¼Œæ¥æ”¶åˆ°è¯·æ±‚ï¼Œå¯¹åº”çš„ä»£ç ï¼Œé“¾æ¥ä¸Šmysqlæ•°æ®åº“ï¼Œæ’å…¥ä¸€ç¯‡åšå®¢ï¼Œphpçš„ä»£ç ï¼Œå°±è¢«ç¿»è¯‘ä¸ºå…·ä½“çš„SQL
> â†“
>
> mysql  3306 ï¼Œæ¥æ”¶åˆ°ä¸€ä¸ªæŒ‡ä»¤ insert into  article  values(10,"åŸºå°¼å¤ªç¾","ä¸¤å¹´åŠçš„è¿ç»´");

å¬æ‡‚è¿™éƒ¨åˆ†é€»è¾‘ï¼Œåˆ·

ä¸»è¦ä»¥DDLç±»åˆ«å·¥ä½œä¸ºä¸»ï¼Œä¹Ÿå°±æ˜¯æ•°æ®å®šä¹‰ï¼Œè¿ç»´å’Œå¼€å‘éƒ½å¾—æŒæ¡

- create
- alter
- drop

### æŸ¥çœ‹DDLè¯­å¥å…·ä½“ä¿¡æ¯

```
? Data Definition
æ•°æ®å®šä¹‰


```

### DCLæ•°æ®æˆæƒæ§åˆ¶

ä¸€èˆ¬æ˜¯è¿ç»´æ“ä½œçš„å¤šäº›

- grant
- revoke
- commit
- Rollback

```
? Account Management

```

### DMLæ•°æ®æ“ä½œè¯­è¨€

å¼€å‘è¦é‡ç‚¹æŒæ¡çš„SQLï¼Œè¿ç»´ç†Ÿæ‚‰å°±å¥½ï¼Œä¹Ÿå°±æ˜¯DMLæ•°æ®æ“ä½œè¯­è¨€ï¼Œå› ä¸ºç½‘ç«™æœ‰å„å¼å„æ ·çš„æ•°æ®å†™å…¥ã€æ•°æ®è¯»å–æ“ä½œï¼Œè¿™æ˜¯å¼€å‘å¯¹äºè¡¨çš„è®¾è®¡ï¼Œæ˜¯å¼€å‘å¿…é¡»é‡ç‚¹æŒæ¡çš„æŠ€èƒ½ã€‚

è¿ç»´æ— é¡»åƒå¼€å‘ä¸€æ ·ï¼Œäº†è§£å„ç§ä¸šåŠ¡è¡¨çš„ç»“æ„ã€è®¾è®¡ï¼Œåªéœ€è¦ç†Ÿæ‚‰æŸ¥è¯¢æ•°æ®æ“ä½œã€‚

ä¹Ÿå°±æ˜¯DMLè¯­å¥

- select
- insert
- delete
- update

## -------å¼€å§‹DDLæ•°æ®åº“å®šä¹‰è¯­å¥ç¯‡



# æ•°æ®åº“å¯¹è±¡ç®¡ç†

![1659426050153](pic/1659426050153.png)





## åº“ç®¡ç†

æ•°æ®åº“çš„å®šä¹‰å­¦ä¹ 

- åˆ›å»º
- æŸ¥çœ‹
- åˆ é™¤





```
å…³äºæ•°æ®åº“çš„å±æ€§

- æ•°æ®åº“å

- æ•°æ®åº“å±æ€§ã€å­—ç¬¦é›†ã€æ ¡å¯¹è§„åˆ™ï¼ˆå¤§å°å†™ç­‰ï¼‰

# åˆ—å‡ºå½“å‰å®ä¾‹ä¸­çš„æ‰€æœ‰åº“ï¼Œä»¥ä½ å½“å‰ç™»å½•çš„è´¦å·æƒé™ä¸ºç»“æœ
show databases;

# æŸ¥çœ‹ä»¥å­˜åœ¨çš„æ•°æ®åº“çš„ä¿¡æ¯

show create database åº“çš„åå­—;

mysql> show create database employees;
+-----------+----------------------------------------------------------------------+
| Database  | Create Database                                                      |
+-----------+----------------------------------------------------------------------+
| employees | CREATE DATABASE `employees` /*!40100 DEFAULT CHARACTER SET latin1 */ |
+-----------+----------------------------------------------------------------------+
1 row in set (0.00 sec)


# ä¿©å±æ€§
1. åå­—
2. æ•°æ®åº“çš„ç¼–ç   latin1 è¯¥æ•°æ®åº“ä¸‹çš„è¡¨ï¼Œå°±æ˜¯ä¸æ”¯æŒä¸­æ–‡çš„

å¦‚ä½•æ­£ç¡®å‘æ•°æ®åº“ä¸­å†™å…¥ä¸­æ–‡ 

3. ä¿®æ”¹åº“ã€ä»¥åŠè¡¨çš„ç¼–ç ï¼Œéƒ½æ˜¯utf8ç¼–ç æ‰è¡Œ

# æ•°æ®åº“çš„å±æ€§æŸ¥çœ‹ï¼Œ3ç‚¹ï¼Œåˆ·3333ç†è§£äº†

å…ˆçœ‹åº“è¡¨çš„å±æ€§ï¼Œç„¶åå†å»æ“ä½œå³å¯


# æŸ¥çœ‹ä¸€ä¸ªæ”¯æŒä¸­æ–‡çš„æ•°æ®åº“

show create database dev01;
mysql> show create database dev01;
+----------+-------------------------------------------------------------------+
| Database | Create Database                                                   |
+----------+-------------------------------------------------------------------+
| dev01    | CREATE DATABASE `dev01` /*!40100 DEFAULT CHARACTER SET utf8mb4 */ |
+----------+-------------------------------------------------------------------+
1 row in set (0.00 sec)



# åº“æ˜¯utf8mb4ä¸­æ–‡å­—ç¬¦é›†çš„ï¼Œè¯¥åº“ä¸‹å»ºçš„è¡¨ï¼Œä¹Ÿéƒ½æ˜¯è¯¥å­—ç¬¦é›†

mysql> show tables from dev01;
Empty set (0.00 sec)


mysql> show tables from dev01;
Empty set (0.00 sec)

mysql> show tables from dev01;
+-----------------+
| Tables_in_dev01 |
+-----------------+
| t1              |
+-----------------+
1 row in set (0.00 sec)

mysql> # æŸ¥çœ‹è¡¨ç»“æ„ï¼Œè¡¨æœ‰å“ªäº›å±æ€§ï¼Œå­—æ®µ;
mysql> 
mysql> 
mysql> desc dev01.t1;
+-------+--------------+------+-----+---------+-------+
| Field | Type         | Null | Key | Default | Extra |
+-------+--------------+------+-----+---------+-------+
| id    | int(11)      | NO   | PRI | NULL    |       |
| name  | varchar(255) | YES  |     | NULL    |       |
+-------+--------------+------+-----+---------+-------+
2 rows in set (0.00 sec)

mysql> # å»ºè¡¨ï¼ŒæŸ¥çœ‹è¡¨ç»“æ„ï¼Œçœ‹æ‡‚222


# å¦‚ä½•çœ‹è¡¨è¯¦ç»†ä¿¡æ¯
SHOW CREATE TABLE dev01.t1;

mysql> SHOW CREATE TABLE dev01.t1;
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                                                  |
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| t1    | CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 |
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)




# å»ºæ•°æ®è¡¨çš„è¯­å¥
 CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4


# ç®€å†™å¦‚ä¸‹ 
# è¯­æ³•
create table  è¡¨å(å­—æ®µå  å­—æ®µæ•°æ®ç±»å‹,  å­—æ®µ2 å­—æ®µæ•°æ®ç±»å‹, xxxx)  è¡¨å­—ç¬¦é›†å±æ€§ ;

#æ”¹å†™æ¡ˆä¾‹
create table  t2  (id  int(11)  not null, name  varchar(255) default null ,primary key(id)  )      engine=innodb    default  charset=utf8mb4;


# 1. å…³äºåˆ›å»ºæ•°æ®è¡¨çš„å›¾å½¢åŒ–æ“ä½œ
# 2. show create table t1; æ‹¿åˆ°å»ºè¡¨è¯­å¥
# 3 .æ¨¡ä»¿å¦‚ä½•å»ºè¡¨çš„è¯­å¥ç¼–å†™ï¼Œåˆ›å»ºt2;

#  4. è¦æ³¨æ„ï¼Œå»ºè¡¨ ä½ å½“å‰å†å“ªä¸ªåº“ä¸‹
# 5.  å»ºè®®å¦‚ä¸‹å†™æ³• åˆ¶å®šåº“ï¼Œä¸‹çš„è¡¨
create table  dev01.t3  (id  int(11)  not null, name  varchar(255) default null ,primary key(id)  )      engine=innodb    default  charset=utf8mb4;

#  5ä¸ªç‚¹ï¼Œçœ‹æ‡‚äº†5555

# ä¼‘æ¯ä¼šï¼ŒåŠ¨æ‰‹ç»ƒä¸€ç»ƒï¼Œè¿™ä¸ª5ä¸ªç‚¹çš„æ“ä½œ



```

![1659426673548](pic/1659426673548.png)







## è¡¨å¯¹è±¡

> åé¢çš„æ•°æ®åº“ï¼Œå»ºè®®éƒ½ç”¨å›¾å½¢åŒ–å·¥å…·çš„ å‘½ä»¤è¡Œç»ˆç«¯å»æ“ä½œï¼Œå¯¹æ–°æ‰‹æ›´å‹å¥½ã€‚

```
ç”¨å›¾å½¢åŒ–å·¥å…·ï¼Œçš„

æŸ¥è¯¢å·¥å…·
â†“
æ–°å»ºæŸ¥è¯¢ï¼Œåˆ¶å®šæŸ¥è¯¢æŸä¸ªå®ä¾‹ï¼Œä»¥åŠæŸä¸ªåº“
â†“
åº“ä¸‹çš„å„ç§è¡¨

```



show create åº“/è¡¨ ;

```
å¦‚ä½•çœ‹åº“ï¼Œçš„å±æ€§ï¼Œè¯¦ç»†ä¿¡æ¯

```



## navicatå›¾å½¢åŒ–çš„å‘½ä»¤è¡Œç©æ³•

```bash

-- # show DATABASES  æŸ¥çœ‹å®ä¾‹ä¸‹çš„æ‰€æœ‰åº“ä¿¡æ¯
-- 
-- #  æŸ¥çœ‹åº“çš„è¯¦ç»†å±æ€§ï¼Œåº“ï¼Œå­—ç¬¦é›†
-- # show create database dev01;
-- # CREATE DATABASE `dev01` /*!40100 DEFAULT CHARACTER SET utf8mb4 */
-- 
-- 
-- # æŸ¥çœ‹æ•°æ®è¡¨çš„è¯¦ç»†å±æ€§
-- show create table  t1;

 
-- CREATE TABLE `t1` (
--   `id` int(11) NOT NULL,
--   `name` varchar(255) DEFAULT NULL,
--   PRIMARY KEY (`id`)
-- ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4

--  å†å›¾å½¢åŒ–å·¥å…·ä¸­ï¼Œé€‰ä¸­å¤šè¡Œï¼Œctrl + /  å¯ä»¥å¤šè¡Œï¼Œæ‰¹é‡æ³¨é‡Šçš„ç©æ³•

-- show databases;

-- çœ‹æ‡‚æ³¨é‡Šçš„ç”¨æ³•ï¼Œåˆ·111
```





å³å¯çœ‹åˆ°åº“è¡¨çš„åˆ›å»ºå±æ€§ï¼Œåˆ›å»ºSQLè¯­å¥ã€‚



```
show create åº“/è¡¨ ;

å³å¯çœ‹åˆ°åº“è¡¨çš„åˆ›å»ºå±æ€§ï¼Œåˆ›å»ºSQLè¯­å¥ã€‚



æ•°æ®åº“.æ•°æ®è¡¨å


1. æ•°æ®è¡¨çš„åå­—

2. æ•°æ®è¡¨ï¼Œé‡Œé¢æœ‰ä¸€å †å­—æ®µï¼Œå­—æ®µï¼ˆåå­—ï¼Œæ•°æ®ç±»å‹ï¼Œçº¦æŸæ¡ä»¶ ï¼‰

    
    


select Host,User from mysql.user;



desc mysql.user;






-- æ•°æ®åº“.æ•°æ®è¡¨å
-- 
-- 
-- 1. æ•°æ®è¡¨çš„åå­—
-- 
-- 2. æ•°æ®è¡¨ï¼Œé‡Œé¢æœ‰ä¸€å †å­—æ®µï¼Œå­—æ®µï¼ˆåå­—ï¼Œæ•°æ®ç±»å‹ï¼Œçº¦æŸæ¡ä»¶ ï¼‰
-- 
--     

-- show create table t3;
-- 
-- CREATE TABLE `t3` (
--   `id` int(11) NOT NULL,
--   `name` varchar(255) DEFAULT NULL,
--   PRIMARY KEY (`id`)
-- ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4

-- è¡¨ åå­—  t3
-- 
-- å­—æ®µ
-- id     æ•°æ®ç±»å‹  int(11)     çº¦æŸæ¡ä»¶  NOT NULL ï¼Œä¸ä¸ºç©º
-- 
-- name   varchar(255) çº¦æŸæ¡ä»¶    DEFAULT NULL  è¯¥å­—æ®µï¼Œæ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœä¸æŒ‡å®šnameçš„å€¼ï¼Œé»˜è®¤å¡«å…¥null
-- 
-- 
-- çº¦æŸæ¡ä»¶ï¼Œ   PRIMARY KEY  ç»™ idå­—æ®µå•ç‹¬æ·»åŠ çš„çº¦æŸ  
-- è¿™ä¸ªå«åšä¸»é”® ï¼ˆéç©ºä¸”å”¯ä¸€ï¼Œ  not null   UNIQUE    ï¼‰
-- è¯¥å­—æ®µå¿…é¡» å¿…é¡»æœ‰å€¼ï¼Œnot nullï¼Œéç©º
-- UNIQUe  è¯¥å­—æ®µçš„å€¼ï¼Œä¸èƒ½é‡å¤
-- å¬æ‡‚ 1111ï¼Œå¸¦ä½ æ¥çœ‹ç»“æœ

```



![1659429003723](pic/1659429003723.png)

```
-- æ•°æ®åº“.æ•°æ®è¡¨å
-- 
-- 
-- 1. æ•°æ®è¡¨çš„åå­—
-- 
-- 2. æ•°æ®è¡¨ï¼Œé‡Œé¢æœ‰ä¸€å †å­—æ®µï¼Œå­—æ®µï¼ˆåå­—ï¼Œæ•°æ®ç±»å‹ï¼Œçº¦æŸæ¡ä»¶ ï¼‰
-- 
--     

-- show create table t3;
-- 
-- CREATE TABLE `t3` (
--   `id` int(11) NOT NULL,
--   `name` varchar(255) DEFAULT NULL,
--   PRIMARY KEY (`id`)
-- ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4

-- è¡¨ åå­—  t3
-- 
-- å­—æ®µ
-- id     æ•°æ®ç±»å‹  int(11)     çº¦æŸæ¡ä»¶  NOT NULL ï¼Œä¸ä¸ºç©º
-- 
-- name   varchar(255) çº¦æŸæ¡ä»¶    DEFAULT NULL  è¯¥å­—æ®µï¼Œæ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœä¸æŒ‡å®šnameçš„å€¼ï¼Œé»˜è®¤å¡«å…¥null
-- 
-- 
-- çº¦æŸæ¡ä»¶ï¼Œ   PRIMARY KEY  ç»™ idå­—æ®µå•ç‹¬æ·»åŠ çš„çº¦æŸ  
-- è¿™ä¸ªå«åšä¸»é”® ï¼ˆéç©ºä¸”å”¯ä¸€ï¼Œ  not null   UNIQUE    ï¼‰
-- è¯¥å­—æ®µå¿…é¡» å¿…é¡»æœ‰å€¼ï¼Œnot nullï¼Œéç©º
-- UNIQUe  è¯¥å­—æ®µçš„å€¼ï¼Œä¸èƒ½é‡å¤
-- å¬æ‡‚ 1111ï¼Œå¸¦ä½ æ¥çœ‹ç»“æœ

-- åŸºäºå›¾å½¢åŒ–çš„ï¼Œæ•°æ®æ’å…¥ï¼ŒæŸ¥çœ‹çº¦æŸæ¡ä»¶çš„ä½œç”¨
--  insert è¯­å¥ï¼Œç•™æ˜å¤©å°†

-- æµ‹è¯•ï¼Œidå­—æ®µï¼Œæ˜¯å¦èƒ½ç•™ç©ºï¼Œä»¥åŠæ˜¯å¦èƒ½é‡å¤

-- æµ‹è¯•nameå­—æ®µçš„ç©æ³• ï¼Œ1 å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œ2ï¼Œ å­—ç¬¦ä¸²æœ‰é»˜è®¤å€¼ null 
-- mysqlçš„æ•°æ®è¡¨çš„ï¼Œå­—æ®µæµ‹è¯•ï¼Œ  
-- çº¦æŸæ¡ä»¶  PRIMARY key  ï¼Œnot null   UNIQUE
--  çº¦æŸæ¡ä»¶ DEFAULT NULL 

-- æµ‹å­—æ®µçš„æ•°æ®ç±»å‹ï¼Œ1ï¼Œ å€¼è¦å’Œç±»å‹å¯¹åº” ï¼Œ2  èŒƒå›´åˆ«è¶…å‡ºäº†
-- è®°ä½ intè®°ä½ æœ‰å–å€¼èŒƒå›´å°±è¡Œ   id  int  (-2 147 483 64 ~  2 147 483 647)  ï¼Œè´Ÿæ•°ï¼Œæ­£æ•°
-- 214748364
-- å­—ç¬¦ä¸²åé¢çš„æ‹¬å·ï¼Œè¡¨ç¤ºå­—ç¬¦çš„ä¸ªæ•°  

```

![1659429540922](pic/1659429540922.png)





![1659429620649](pic/1659429620649.png)



![1659429913214](pic/1659429913214.png)



# å°ç»“æ•°æ®è¡¨çš„å±æ€§

- è¡¨æœ‰åå­—
  - è¡¨çš„å­—ç¬¦é›†ï¼ˆutf8mb4 å¯ä»¥å†™å…¥  â€œæ€¥é’®å¤ªç¾â€ä¸­æ–‡ ï¼‰
- è¡¨æœ‰å­—æ®µçš„è®¾ç½®
  - å­—æ®µ ----åå­—
  - å­—æ®µ---æ•°æ®ç±»å‹ --ç¬¦åˆä¸šåŠ¡é€»è¾‘











## å­—ç¬¦é›†

```
mysqlæ— æ³•æ­£ç¡®è¯»å†™ä¸­æ–‡ï¼Œæ˜¯å¾ˆå¤šæ–°æ‰‹å¤´ç–¼çš„é—®é¢˜ï¼Œç¯å¢ƒé—®é¢˜ï¼Œè¿ç»´æœ€æ‹¿æ‰‹

èƒŒæ™¯é—®é¢˜
1. å†linuxä¸Š select èƒ½è¯»å‡ºæ¥ä¸­æ–‡
2. ä»£ç æ‰§è¡Œï¼Œå®¢æˆ·ç«¯è¯»çš„æ˜¯ä¹±ç 


å¦‚ä½•è§£å†³
1. æ‰€æœ‰ç»ˆç«¯ï¼Œéƒ½å¾—æ”¯æŒ utf8ä¸­æ–‡


1.    ä½ ç”¨çš„ä»€ä¹ˆç»ˆç«¯å·¥å…·   xshellè¦é…ç½®æ˜¯ä¸­æ–‡





2.     æœåŠ¡ç«¯ï¼Œä¹Ÿå¾—æ”¯æŒä¸­æ–‡ï¼Œ ï¼Œï¼Œåº“ è¡¨éƒ½æ˜¯utf8çš„

mysql> show create table t3;
+-------+---------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                                                |
+-------+---------------------------------------------------------------------------------------------------------------------------------------------+
| t3    | CREATE TABLE `t3` (
  `id` int(11) NOT NULL,
  `name` varchar(4) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 |
+-------+---------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)


# ä»€ä¹ˆæƒ…å†µä¸‹ï¼Œè¯»ä¸å‡ºä¸­æ–‡
# å®¢æˆ·ç«¯ï¼Œæ— æ³•è§£ç ï¼Œutf8çš„ç¼–ç æ•°æ®

# 

```



> æˆ‘ä»¬å¦‚æœæƒ³æ­£ç¡®çš„è¯»å†™mysqlçš„ä¸­æ–‡æ•°æ®ï¼Œéœ€è¦ä¿è¯æœåŠ¡ç«¯ã€å®¢æˆ·ç«¯çš„å­—ç¬¦é›†ä¸€è‡´
>
> æœåŠ¡ç«¯æ˜¯æˆ‘ä»¬çš„mysqlï¼Œå®¢æˆ·ç«¯çš„å½¢å¼æœ‰å¾ˆå¤šäº†ï¼Œå¯èƒ½æ˜¯xshellï¼Œnavicatï¼Œç¨‹åºç­‰ç­‰
>
> æœåŠ¡ç«¯mysqlçš„ç¼–ç è®¾ç½®ä¸æŸ¥çœ‹

![1659431593445](pic/1659431593445.png)





```
# å…¨ä¸–ç•Œï¼Œèƒ½å¤„ç†ä¸­å›½ä¸šåŠ¡çš„ï¼Œæ•°æ®åº“ï¼Œéƒ½ä¼šç”¨utf8ï¼Œä»¥åŠå¯ä»¥è¯†åˆ«å¤§å¤šæ•°å›½å®¶çš„è¯­è¨€ï¼Œå¦‚ä¸­æ–‡ï¼Œæ³•æ–‡

# 
# æŸ¥çœ‹mysqlæœåŠ¡ç«¯ï¼Œæ”¯æŒå“ªäº›ç¼–ç 
# æŸ¥çœ‹å½“å‰mysql 5.7.28 æ”¯æŒå“ªäº›å­—ç¬¦é›†
# å¦‚æœæ˜¯éä¸­å›½æ±‰å­—çš„ä¸šåŠ¡ï¼Œå¤„ç†å¦‚ éæ´²çš„ä¸šåŠ¡å•Šï¼Œç”¨éæ´²å¯¹åº”çš„ç¼–ç è¡¨ï¼Œä¸ºçš„æ˜¯èŠ‚çœç£ç›˜ç©ºé—´

# 2é€‰æ‹©ï¼Œæ”¯æŒä¸­æ–‡çš„ï¼Œmysql5.7ä¹‹å‰ å¤§å¤šç”¨ utf8ç¼–ç 
# mysql5.7 åˆ° 8.0ä¹‹åï¼Œmysqlé»˜è®¤ç”¨ utf8mb4 æ•ˆç‡æ›´é«˜ï¼Œæ”¯æŒçš„ç¬¦å·æ›´å¤š

show character set;
#
show variables like '%char%';
show variables like 'collation%';



# æŸ¥çœ‹å½“å‰mysqlæ”¯æŒå“ªäº›å­—ç¬¦é›†
# show character set;

# æ˜¾ç¤ºå½“å‰mysqlæ•°æ®åº“çš„å˜é‡ä¿¡æ¯ï¼ŒåŸºäºå˜é‡ååŒ¹é…
#  ********char********  è¿™å°±æ˜¯ ç™¾åˆ†å·å†æ•°æ®åº“çš„ä½œç”¨
-- show variables like '%char%';
#   æ‰¾å‡ºä»¥ collation******* å˜é‡ 
#  

# ç²¾ç¡®æŸ¥æ‰¾ å˜é‡å  coll 
-- show variables like 'coll';

# èƒ½æŸ¥åˆ°ä¸œè¥¿å—ï¼Ÿ 3   4   
# æ‰¾å‡º coll****************** ç»“å°¾çš„å˜é‡
#  % ä»»æ„åŒ¹é… 
show variables like 'coll%';




```

![1659431073965](pic/1659431073965.png)







## å¦‚ä½•å¤„ç†æ— æ³•è¯»å–æ•°æ®åº“ä¸­æ–‡çš„é—®é¢˜

```
-- 1. æŸ¥çœ‹å½“å‰æ•°æ®åº“ï¼Œé»˜è®¤æ˜¯ä»€ä¹ˆå­—ç¬¦é›†


# SHOW VARIABLES  LIKE  '%char%'


# character_set_server ï¼Œé»˜è®¤å€¼ï¼Œ è¿™ä¸ªçš„å€¼ï¼Œæ˜¯utf8ï¼Œå¦åˆ™é»˜è®¤åˆ›å»ºçš„åº“ï¼Œè¡¨ä½ çœ‹çœ‹å­—ç¬¦é›†


# 2.è¦ä¿®æ”¹æ•°æ®åº“é»˜è®¤çš„ç¼–ç æ”¯æŒï¼Œå»ºè®®ç›´æ¥åŠ å…¥my.cnf é‡å¯å³å¯
SQLä¿®æ”¹ä»¥å­˜åœ¨çš„æ•°æ®åº“çš„ç¼–ç 


3. ä¿®æ”¹my.cnf

[mysqld]

character_set_server=utf8mb4
log-error=/linux0224/mysql_3306/logs/3306-err.log
port=3306
user=mysql
basedir=/opt/mysql
datadir=/linux0224/mysql_3306/
socket=/tmp/mysql.sock

[mysql]
socket=/tmp/mysql.sock


4.é‡å¯mysqlå³å¯ï¼Œç»§ç»­æŸ¥çœ‹ç³»ç»Ÿé»˜è®¤ç¼–ç æ”¯æŒ

[root@tech-db-51 ~]#systemctl restart mysqld


[root@tech-db-51 ~]#

mysql> show variables like '%char%'
    -> ;
+--------------------------+----------------------------------------------------------+
| Variable_name            | Value                                                    |
+--------------------------+----------------------------------------------------------+
| character_set_client     | utf8                                                     |
| character_set_connection | utf8                                                     |
| character_set_database   | utf8mb4                                                  |
| character_set_filesystem | binary                                                   |
| character_set_results    | utf8                                                     |
| character_set_server     | utf8mb4                                                  |
| character_set_system     | utf8                                                     |
| character_sets_dir       | /opt/mysql-5.7.28-linux-glibc2.12-x86_64/share/charsets/ |
+--------------------------+----------------------------------------------------------+
8 rows in set (0.00 sec)





5. æˆ‘å¸Œæœ›ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªäººèƒ½å›åº”æˆ‘ï¼Œæˆ‘åŠ¨åŠ›è¿˜è¶³ä¸€ç‚¹

6.å†æ¬¡åˆ›å»ºæ•°æ®åº“ï¼Œè¡¨æŸ¥çœ‹ï¼Œå­—ç¬¦é›†
mysql> create database testdb2;
Query OK, 1 row affected (0.00 sec)

mysql> show create database testdb2;
+----------+---------------------------------------------------------------------+
| Database | Create Database                                                     |
+----------+---------------------------------------------------------------------+
| testdb2  | CREATE DATABASE `testdb2` /*!40100 DEFAULT CHARACTER SET utf8mb4 */ |
+----------+---------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> create table testdb2.t1(id int,name char(10));
Query OK, 0 rows affected (0.00 sec)

mysql> 
mysql> 
mysql> show create table  testdb2.t1;
+-------+-------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table                                                                                                            |
+-------+-------------------------------------------------------------------------------------------------------------------------+
| t1    | CREATE TABLE `t1` (
  `id` int(11) DEFAULT NULL,
  `name` char(10) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 |
+-------+-------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> # åˆ°è¿™å®Œå…¨çœ‹æ‡‚ 666
mysql> 




```

### æµ‹è¯•æ’å…¥ä¸­æ–‡è¡¨æ•°æ®

```
# å¾€t1è¡¨ä¸­æ’å…¥æ•°æ®
# ç”±äºæ²¡ç»™idå­—æ®µè®¾ç½®ä¸»é”®ï¼Œå› æ­¤å¿…é¡»æ‰‹åŠ¨åŠ å…¥ idçš„å€¼

insert into  t1  VALUES(1,'åˆ˜æ°¸é£');
insert into t1 values(2,"å¼ é‘«")




```



### æŸ¥è¯¢æ•°æ®

```
# å¾€t1è¡¨ä¸­æ’å…¥æ•°æ®
# ç”±äºæ²¡ç»™idå­—æ®µè®¾ç½®ä¸»é”®ï¼Œå› æ­¤å¿…é¡»æ‰‹åŠ¨åŠ å…¥ idçš„å€¼

-- insert into  t1  VALUES(1,'åˆ˜æ°¸é£');
-- insert into t1 values(2,"å¼ é‘«")


# åˆ¶å®šå­—æ®µæŸ¥è¯¢æ•°æ®

-- select id , name from  t1;

-- select name,id from t1;

# ä¸å¾—æŸ¥è¯¢ä¸å­˜åœ¨çš„å­—æ®µ

select  hobby from t1;


```



### å¸¸ç”¨å­—ç¬¦é›†ï¼Œå­—ç¬¦åºç»„åˆ



è®°ä½å¦‚ä¸‹ç”¨æ³•

![1659432618103](pic/1659432618103.png)





```
utf-8        æœ€å¤§æ”¯æŒ3å­—èŠ‚çš„å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯ä¸­æ–‡æ±‰å­—ï¼Œä¸æ”¯æŒemojiç¬¦å·
utf8mb4    æœ€å¤§æ”¯æŒ4å­—èŠ‚çš„å­—ç¬¦ï¼Œæ”¯æŒemojiå­—ç¬¦
mysql8.0ä¹‹å‰ï¼Œé»˜è®¤å­—ç¬¦é›†æ˜¯latin1 
8.0ä¹‹åé»˜è®¤utf8mb4 ï¼Œç›®å‰ä¸»æµç½‘ç«™è‚¯å®šéƒ½æ˜¯æ”¯æŒè¡¨æƒ…ç¬¦å·çš„ï¼Œå¦‚emoji ğŸ˜„è¿™ç±»ã€‚

https://www.cnblogs.com/chyingp/p/mysql-character-set-collation.html
é˜¿é‡ŒæŠ€æœ¯ä¸“å®¶çš„åšå®¢


```





# 4.æ•°æ®è¡¨ï¼ˆæ•°æ®å±æ€§ï¼‰

```
æŸ¥çœ‹è¡¨çš„ç»†èŠ‚å±æ€§ï¼Œæ•°æ®ç±»å‹

```

æ•°æ®ç±»å‹ï¼Œæ˜¯å¼€å‘ç”¨äºè¿›è¡Œè¡¨è®¾è®¡ï¼Œå¦‚ä½•å­˜å‚¨ç½‘ç«™æ•°æ®ï¼Œä»¥åŠå¦‚ä½•è®¾è®¡æ•°æ®ç±»å‹çš„ç²¾ç¡®é•¿åº¦ï¼Œå¦‚å­˜å‚¨å§“åï¼Œå¹´é¾„ï¼Œå·¥èµ„è®°å½•ï¼Œåšæ–‡æ•°æ®ç­‰ã€‚

è¿˜æœ‰æ›´ä¸¥è°¨çš„å¦‚é“¶è¡Œï¼Œä¿é™©ä¼ä¸šï¼Œéœ€è¦å¯¹æ•°æ®è¿›è¡Œé«˜ç²¾åº¦çš„å°æ•°ç‚¹ä¿ç•™ï¼Œå°±å¾—å¯¹è¡¨è®¾è®¡è°¨æ…åˆè°¨æ…ã€‚

å°±å¾—å…³æ³¨å„ä¸ªæ•°æ®ç±»å‹çš„åŒºåˆ«ï¼Œç»†èŠ‚ï¼Œä»¥åŠmysqlä¸åŒç‰ˆæœ¬çš„å¼•æ“ï¼Œä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜ï¼Œè¿™å°±å¾—å¼€å‘+DBAï¼ˆä¸“é—¨ç»´æŠ¤æ•°æ®åº“æ–¹å‘çš„è¿ç»´å·¥ç¨‹å¸ˆï¼‰ï¼Œç»“åˆè®¾è®¡ã€‚





![1659432880311](pic/1659432880311.png)



## æ•°å­—ï¼Œæ•°æ®ç±»å‹

MySQL ä¸­å®šä¹‰æ•°æ®å­—æ®µçš„ç±»å‹å¯¹ä½ æ•°æ®åº“çš„ä¼˜åŒ–æ˜¯éå¸¸é‡è¦çš„ã€‚

MySQL æ”¯æŒå¤šç§ç±»å‹ï¼Œå¤§è‡´å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼šæ•°å€¼ã€æ—¥æœŸ/æ—¶é—´å’Œå­—ç¬¦ä¸²(å­—ç¬¦)ç±»å‹ã€‚

MySQL æ”¯æŒæ‰€æœ‰æ ‡å‡† SQL æ•°å€¼æ•°æ®ç±»å‹ã€‚

è¿™äº›ç±»å‹åŒ…æ‹¬ä¸¥æ ¼æ•°å€¼æ•°æ®ç±»å‹(INTEGERã€SMALLINTã€DECIMAL å’Œ NUMERIC)ï¼Œä»¥åŠè¿‘ä¼¼æ•°å€¼æ•°æ®ç±»å‹(FLOATã€REAL å’Œ DOUBLE PRECISION)ã€‚

å…³é”®å­—INTæ˜¯INTEGERçš„åŒä¹‰è¯ï¼Œå…³é”®å­—DECæ˜¯DECIMALçš„åŒä¹‰è¯ã€‚

BITæ•°æ®ç±»å‹ä¿å­˜ä½å­—æ®µå€¼ï¼Œå¹¶ä¸”æ”¯æŒ MyISAMã€MEMORYã€InnoDB å’Œ BDBè¡¨ã€‚

ä½œä¸º SQL æ ‡å‡†çš„æ‰©å±•ï¼ŒMySQL ä¹Ÿæ”¯æŒæ•´æ•°ç±»å‹ TINYINTã€MEDIUMINT å’Œ BIGINTã€‚ä¸‹é¢çš„è¡¨æ˜¾ç¤ºäº†éœ€è¦çš„æ¯ä¸ªæ•´æ•°ç±»å‹çš„å­˜å‚¨å’ŒèŒƒå›´ã€‚



## å­—ç¬¦ä¸²ç±»å‹

å­—ç¬¦ä¸²ç±»å‹æŒ‡CHARã€VARCHARã€BINARYã€VARBINARYã€BLOBã€TEXTã€ENUMå’ŒSETã€‚è¯¥èŠ‚æè¿°äº†è¿™äº›ç±»å‹å¦‚ä½•å·¥ä½œä»¥åŠå¦‚ä½•åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨è¿™äº›ç±»å‹ã€‚







## æ—¥æœŸå’Œæ—¶é—´ç±»å‹

è¡¨ç¤ºæ—¶é—´å€¼çš„æ—¥æœŸå’Œæ—¶é—´ç±»å‹ä¸ºDATETIMEã€DATEã€TIMESTAMPã€TIMEå’ŒYEARã€‚

æ¯ä¸ªæ—¶é—´ç±»å‹æœ‰ä¸€ä¸ªæœ‰æ•ˆå€¼èŒƒå›´å’Œä¸€ä¸ª"é›¶"å€¼ï¼Œå½“æŒ‡å®šä¸åˆæ³•çš„MySQLä¸èƒ½è¡¨ç¤ºçš„å€¼æ—¶ä½¿ç”¨"é›¶"å€¼ã€‚

TIMESTAMPç±»å‹æœ‰ä¸“æœ‰çš„è‡ªåŠ¨æ›´æ–°ç‰¹æ€§ï¼Œå°†åœ¨åé¢æè¿°ã€‚



# 5.æ•°æ®è¡¨ï¼ˆåˆ—çº¦æŸï¼‰

## ä¸»é”® primary key ç®€ç§°pk

```
ç‰¹ç‚¹
1. ä¸€å¼ è¡¨ï¼Œåªèƒ½æœ‰ä¸€ä¸ªpkï¼Œå¯ä»¥ç”±å¤šä¸ªåˆ—æ„æˆ
2. ç­‰äº å”¯ä¸€çº¦æŸï¼ˆUnique Keyï¼‰å’Œéç©ºçº¦æŸï¼ˆNOT NULLï¼‰ çš„ç»„åˆ
3. å»ºè®®æ¯å¼ è¡¨éƒ½è¦è®¾ç½®ä¸»é”®ï¼Œä¾¿äºç´¢å¼•çš„åº”ç”¨ï¼Œä¸€èˆ¬éƒ½ä»¥idåˆ—ä¸ºä¸»é”®ï¼Œæ˜¯é»˜è®¤è‡ªå¢çš„æ•°å­—åˆ—ã€‚

```

éç©º+å”¯ä¸€çš„ç‰¹ç‚¹ï¼Œå› æ­¤æ¯ä¸€å¼ æ•°æ®è¡¨çš„ç¬¬ä¸€ä¸ªå­—æ®µï¼Œå¦‚idåˆ—ï¼Œå°±å¿…ç„¶ä¼šä½¿ç”¨ä¸»é”®äº†ã€‚



```
1. æ‹¿ä¸€ä¸ªæµ‹è¯•çš„è¡¨ï¼Œt1è¡¨ï¼Œé»˜è®¤id åˆ—æ²¡æœ‰ä¸»é”®ï¼Œä¸å­˜åœ¨è‡ªå¢ï¼Œéç©ºä¸”å”¯ä¸€


2. ä¿®æ”¹è¡¨å­—æ®µçº¦æŸï¼Œid è®¾ç½®ï¼Œ2ä¸ªçº¦æŸï¼Œè‡ªå¢ï¼Œä¸»é”®

```

![1659433053282](pic/1659433053282.png)



![1659433391243](pic/1659433391243.png)

```
æµ‹è¯•è¯¥æ–°è¡¨çš„æ•°æ®å†™å…¥
show create table t1;

# SQLç†Ÿç»ƒä¹‹åï¼Œå¾ˆå¤šå…³é”®å­—ï¼Œç”¨å›¾å½¢åŒ–å·¥å…·ï¼Œè‡ªåŠ¨ç”ŸæˆSQLï¼Œæ‹¿å»ç”¨
# ä½ å·²ç»å¾ˆç†Ÿæ‚‰SQLè¯­å¥ 

CREATE TABLE `t1` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` char(10) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4

#  AUTO_INCREMENT è®°å½•è¯¥è¡¨è®°å½•çš„æ’å…¥è¡Œå·



# æµ‹è¯•æ•°æ®æ’å…¥
# æ’å…¥æ•°æ® 
insert into t1(name) values('è€åˆ˜ç‰');
insert into t1(name) values('çºªæ™“å²š');
insert into t1(name) values('å’Œç…');

# æŸ¥çœ‹æ•°æ®

```



# å¦‚ä½•æŸ¥çœ‹æ•°æ®è¡¨è®°å½•ï¼Œä¸»é”®å¢é•¿æ­¥é•¿è§„åˆ™

```
mysql> # å†…ç½®å˜é‡
mysql> show VARIABLES like '%incr%'
    -> ;
+-----------------------------+-------+
| Variable_name               | Value |
+-----------------------------+-------+
| auto_increment_increment    | 1     |
| auto_increment_offset       | 1     |
| div_precision_increment     | 4     |
| innodb_autoextend_increment | 64    |
+-----------------------------+-------+
4 rows in set (0.00 sec)

# é»˜è®¤è‡ªå¢çš„æ­¥é•¿æ˜¯ 1
mysql> insert into t1(name) values('åšæŒä½ï¼Œéƒ½æ˜¯å¥½è´§');
Query OK, 1 row affected (0.00 sec)

mysql> 
mysql> 
mysql> select * from t1;
+----+--------------------------+
| id | name                     |
+----+--------------------------+
|  1 | åˆ˜æ°¸é£                   |
|  2 | å¼ é‘«                     |
|  3 | è€åˆ˜ç‰                   |
|  4 | çºªæ™“å²š                   |
|  5 | å’Œç…                     |
|  6 | åšæŒä½ï¼Œéƒ½æ˜¯å¥½è´§         |
+----+--------------------------+
6 rows in set (0.00 sec)

mysql> 

mysql> show variables like '%incr%';
+-----------------------------+-------+
| Variable_name               | Value |
+-----------------------------+-------+
| auto_increment_increment    | 1     |
| auto_increment_offset       | 1     |
| div_precision_increment     | 4     |
| innodb_autoextend_increment | 64    |
+-----------------------------+-------+
4 rows in set (0.00 sec)


# ä¿®æ”¹æ­¥é•¿ä¸º2ï¼Œæ¯æ¬¡id+2ï¼Œçº¯å±ç»ƒä¹ å»äº†è§£


set ä¿®æ”¹mysqlçš„å†…ç½®å˜é‡

set @@auto_increment_increment=2;

# å†æ¬¡æ’å…¥t1è¡¨çš„æ•°æ®



mysql> insert into t1(name)  values('ç¡ç€äº†æ‰£666');
Query OK, 1 row affected (0.00 sec)

mysql> insert into t1(name)  values('ç¡ç€äº†æ‰£666');
Query OK, 1 row affected (0.00 sec)

mysql> 
mysql> select * from t1;
+----+--------------------------+
| id | name                     |
+----+--------------------------+
|  1 | åˆ˜æ°¸é£                   |
|  2 | å¼ é‘«                     |
|  3 | è€åˆ˜ç‰                   |
|  4 | çºªæ™“å²š                   |
|  5 | å’Œç…                     |
|  6 | åšæŒä½ï¼Œéƒ½æ˜¯å¥½è´§         |
|  7 | ç¡ç€äº†æ‰£666              |
|  9 | ç¡ç€äº†æ‰£666              |
| 11 | ç¡ç€äº†æ‰£666              |
| 13 | ç¡ç€äº†æ‰£666              |
+----+--------------------------+
10 rows in set (0.00 sec)




```







## éç©º not null

```
è¯¥å­—æ®µå¿…é¡»å†™å…¥æ•°æ®
å»ºè®®æ¯ä¸€åˆ—éƒ½è®¾ç½®ï¼Œä¾¿äºç´¢å¼•åº”ç”¨

```

## å”¯ä¸€æ€§ unique key

```
è¯¥åˆ—çš„å€¼ä¸å¾—é‡å¤ï¼Œä½ æ¯”å¦‚å­˜å‚¨èº«ä»½è¯å·çš„åˆ—ï¼Œæ¯ä¸€ä¸ªäººçš„å·ç éƒ½æ˜¯å”¯ä¸€ï¼Œä¸å¾—é‡å¤ï¼Œå¾—å¿…é¡»æœ‰æ•°æ®çš„

```



## æ— ç¬¦å· unsingned

```
é’ˆå¯¹æ•°å­—æ•°æ®ç±»å‹è€Œè¨€ï¼Œæ˜¯å¦æœ‰ç¬¦å·ï¼Œå¦‚è´Ÿæ•°

```



## å…¶ä»–å±æ€§

```
1.è¡¨å±æ€§
engineï¼Œå­˜å‚¨å¼•æ“ç±»å‹ï¼Œé»˜è®¤æ˜¯innodb
charsetï¼Œå­—ç¬¦é›†ï¼Œutf8mb4
commentï¼Œæ³¨é‡Š


åˆ—å±æ€§
default ï¼Œä¹Ÿå°±æ˜¯å­—æ®µçš„é»˜è®¤å€¼ï¼Œä¸€èˆ¬å’Œnot nullä¸ä¸ºç©ºç»“åˆç”¨ï¼Œè®¾ç½®ä¸ªé»˜è®¤å€¼ï¼Œå¦‚æ€§åˆ«ä¸é€‰ï¼Œé»˜è®¤æ˜¯ç”·

auto_incrementï¼Œæ•°å­—å­—æ®µï¼Œè‡ªå¢é•¿ï¼Œä¸€èˆ¬é…åˆä¸»é”®ä½¿ç”¨ï¼Œå¦‚ç”¨æˆ·ä¿¡æ¯è¡¨ï¼Œidä¾æ¬¡çš„+1

commentï¼Œåˆ—çš„æ³¨é‡Š

```



æ•°æ®ç±»å‹å°±åˆ°è¿™ã€‚







# ----ä»Šå¤©å°±åˆ°è¿™é‡Œï¼Œä½œä¸šï¼Œçœ‹ç¬”è®°ï¼Œå®Œæ•´æ•°æ®åº“æ“ä½œç†Ÿç»ƒåº¦----

1. æ•´ç†ç¬”è®°
2. å®Œæˆè„‘å›¾çš„è¡¥å……ï¼Œæ­å»ºè‡ªå·±çš„mysqlçŸ¥è¯†ç‚¹å®«æ®¿

3.é¢„ä¹ SQLç©æ³•ï¼Œå¤šåŠ¨æ‰‹æ•²



![æ— æ ‡é¢˜æ€ç»´å¯¼å›¾](pic/æ— æ ‡é¢˜æ€ç»´å¯¼å›¾.png)







# 6.DDLæ•°æ®åº“å®šä¹‰è¯­è¨€

DDLçš„ç‰¹ç‚¹æ˜¯å¯¹æ•°æ®åº“å†…éƒ¨çš„å¯¹è±¡è¿›è¡Œåˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ç­‰æ“ä½œï¼Œä¸æ¶‰åŠå¯¹è¡¨ä¸­å†…å®¹çš„æ“ä½œå’Œæ›´æ”¹ã€‚

è¿™éƒ¨åˆ†æ˜¯è¿ç»´äººå‘˜æˆ–DBAéœ€è¦ç†Ÿç»ƒæŒæ¡çš„å†…å®¹ï¼Œå¼€å‘äººå‘˜äº†è§£å³å¯ã€‚

å…¨ç§°ä¸ºData Definition Languageï¼Œå…¶è¯­å¥åŒ…æ‹¬åŠ¨è¯CREATEã€DROPå’ŒALTERã€‚å¯ä½¿ç”¨è¯¥è¯­è¨€åœ¨æ•°æ®åº“ä¸­åˆ›å»ºæ–°åº“è¡¨æˆ–åˆ é™¤åº“è¡¨ï¼Œæˆ–è€…ä¸ºè¡¨æ·»åŠ å­—æ®µã€ç´¢å¼•ç­‰ã€‚

> åˆ›å»ºæ•°æ®åº“

ä¸å¾—å·²æ•°å­—å¼€å¤´ï¼Œå¤§å°å†™ä¸æ•æ„Ÿ

## 1.1 æ•°æ®åº“éƒ¨åˆ†

```
1. åº“åä¸å¾—ä»¥æ•°å­—å¼€å¤´
2. åº“åå’Œä¸šåŠ¡æœ‰å…³ï¼Œè§åçŸ¥æ„
3. åº“åä¸å¾—æœ‰å¤§å†™å­—æ¯

éƒ½æ˜¯ä¸ºäº†å¤šç³»ç»Ÿå¹³å°çš„å…¼å®¹æ€§

4.åˆ›å»ºæ•°æ®åº“éœ€è¦æœ‰æŒ‡å®šçš„å­—ç¬¦é›†ï¼Œå»ºè®®è®¾å®šé»˜è®¤è§„åˆ™å°±æ˜¯utf8mb4

5.ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œç¦ç”¨æ™®é€šç”¨æˆ·çš„drop databaseæƒé™

```

## 1.2 åˆ›å»ºæ•°æ®åº“

```
å®Œæ•´å†™æ³•
create database  if not exists kings default charset utf8mb4 ;

å…³äºåˆ›å»ºæ•°æ®åº“ï¼Œæ•°æ®è¡¨çš„æŠ€å·§æ€§ç©æ³•ï¼Œä»¥åŠå­¦ä¹ æ–¹æ³•ã€‚


åŸºæœ¬å†™æ³•
create database yuchao_linux charset utf8;
create database yuchao_linux charset utf8mb4;

```



## 1.3 æŸ¥çœ‹æ•°æ®åº“

```
show databases;
# æŸ¥çœ‹show createå¸®åŠ©ä¿¡æ¯
help show create database



å…·ä½“ç”¨æ³•

show create database yuchao_linux;
show create database kings;

```

## 1.4 ä¿®æ”¹æ•°æ®åº“å­—ç¬¦é›†

```
show create database yuchao_linux;
alter database yuchao_linux charset utf8mb4;
 show create database yuchao_linux;
 

```



## 1.5 è®¾ç½®mysqldé»˜è®¤å­—ç¬¦é›†

é…ç½®æ–‡ä»¶

```

```

å†æ¬¡åˆ›å»ºæ•°æ®åº“è¯•è¯•

```

```

## 1.6 æ•°æ®è¡¨éƒ¨åˆ†

### è¡¨å®šä¹‰è§„èŒƒ

### åˆ›å»ºè¡¨

```
1.åˆ›å»ºè¡¨
    a.è¡¨åçš„è§„èŒƒ
        ä¸å¾—æ•°å­—å¼€å¤´
        è§åçŸ¥æ„ï¼Œè¡¨å’Œä¸šåŠ¡æœ‰å…³ï¼Œå‚è€ƒwordpressç­‰æ•°æ®åº“å‘½åè§„èŒƒï¼Œå¦‚yuchaoit_post
        ä¸å¾—å¤§å†™å­—æ¯
        åˆ«è¶…è¿‡18ä¸ªå­—ç¬¦
        åˆ«æ˜¯mysqlé»˜è®¤å…³é”®å­—
    b. é»˜è®¤å­˜å‚¨å¼•æ“æ˜¯innodb
    c. 5.7ä¹‹åï¼Œæ•°æ®è¡¨å­—ç¬¦é›†ï¼Œé»˜è®¤utf8mb4
    d. æ•°æ®è¡¨çš„å­—æ®µï¼ˆåˆ—ï¼‰ä¹Ÿå’Œä¸šåŠ¡æœ‰å…³ï¼Œå­—ç¬¦åˆ«è¶…è¿‡18ä¸ª
    e. æ•°æ®è¡¨çš„å­—æ®µï¼ˆåˆ—ï¼‰è¦é€‰æ‹©åˆé€‚çš„ã€è¶³å¤Ÿå®¹é‡ã€çœç£ç›˜ç©ºé—´çš„æ•°æ®ç±»å‹
    f. æ•°æ®è¡¨çš„å­—æ®µï¼ˆåˆ—ï¼‰å»ºè®®éƒ½not null
    g. æ•°æ®è¡¨çš„å­—æ®µï¼ˆåˆ—ï¼‰å»ºè®®éƒ½è¦æœ‰æ³¨é‡Š
    h. æ•°æ®è¡¨çš„å­—æ®µï¼ˆåˆ—ï¼‰ æ¯å¼ æ•°æ®è¡¨éƒ½å»ºè®®åŠ ä¸»é”®
    i. é’ˆå¯¹not nullçš„åˆ—ï¼Œä¸€èˆ¬ç»™ä¸é»˜è®¤å€¼
    j. ç»™æ¯å¼ è¡¨æ·»åŠ æ³¨é‡Š

```



### ä¿®æ”¹è¡¨

```
1. æ·»åŠ æ•°æ®è¡¨çš„å­—æ®µï¼ˆåˆ—ï¼‰ï¼Œå»ºè®®ç”¨è¿½åŠ æ–¹å¼
2. ä¿®æ”¹åˆ—çš„å±æ€§ï¼Œå»ºè®®ç”¨modifyè¯­å¥
3. ä¿®æ”¹è¡¨çš„å±æ€§ï¼Œå»ºè®®åœ¨ä¸šåŠ¡ä¸ç¹å¿™çš„æ—¶å€™ä¿®æ”¹

```



## 1.8 å›¾å½¢åŒ–å·¥å…·navicatå®æˆ˜

### åˆ›å»ºåº“



### åˆ›å»ºè¡¨

```
CREATE TABLE `students` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'å­¦å·',
  `name` varchar(64) NOT NULL COMMENT 'å­¦ç”Ÿå§“å',
  `age` tinyint(3) NOT NULL DEFAULT '0' COMMENT 'å­¦ç”Ÿå¹´é¾„',
  `gender` enum('ç”·','å¥³') NOT NULL COMMENT 'å­¦ç”Ÿæ€§åˆ«',
  `address` enum('åŒ—äº¬','æ·±åœ³','äº‘å—','æ±Ÿè‹') NOT NULL COMMENT 'çœä»½',
  `intime` datetime NOT NULL COMMENT 'å…¥å­¦æ—¶é—´',
  `phone` char(11) NOT NULL COMMENT 'æ‰‹æœºå·',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

```



### å‘½ä»¤è¡Œå·¥å…·

```
select user();
show databases;
show create database yuchaoit_mysql;
show create table students;
select database();
desc students;

```



### å¤åˆ¶æ•°æ®è¡¨

```
create table stu_back like students;
show tables;
desc stu_back;

```



## 1.9 ä¿®æ”¹è¡¨ç»“æ„

å’±å°±ä¸ç”¨å›¾å½¢åŒ–æ“ä½œäº†ï¼Œå­¦ä¹ åº•å±‚çš„SQLè¯­å¥

### ç»“å°¾åŠ å…¥ä¸€åˆ—

> ç»™studentsè¡¨æ·»åŠ ä¸€ä¸ªå…´è¶£å­—æ®µï¼Œhobby è¦æ±‚åªèƒ½è¾“å…¥20ä¸ªæ±‰å­—ä»¥å†…ï¼ˆ20ï¼‰

```
desc yuchao_linux.students;
alter table yuchao_linux.students add column hobby char(20) not null  default 'å­¦ä¹ ' comment 'å­¦ç”Ÿçˆ±å¥½';


```



## tip:è¡¥å……floatç±»å‹

```
mysqlçš„floatè¯­æ³•

height float(æ€»å…±æœ‰å¤šå°‘ä½,å°æ•°ç‚¹åæœ‰å‡ ä½)

```

> alterè¯­å¥å¸¸ç”¨äºä¿®æ”¹æ•°æ®è¡¨çš„å±æ€§ï¼Œç»“æ„ã€‚

### åœ¨ç¬¬ä¸€åˆ—æ·»åŠ 

æ·»åŠ èº«é«˜å­—æ®µï¼Œè¦æ±‚ä¸è¶…è¿‡3ä½æ•°ï¼Œæœ‰ä¸€ä½å°æ•°

```
alter table yuchao_linux.students add column height float(4,1)  default null comment 'å­¦ç”Ÿèº«é«˜' first;

```



### åœ¨æŒ‡å®šå­—æ®µåæ·»åŠ 

```
alter table yuchao_linux.students drop height;

alter table yuchao_linux.students add column height float(4,1)  default null comment 'å­¦ç”Ÿèº«é«˜' after gender;


```



### åˆ é™¤å­—æ®µ

```
alter table yuchao_linux.students drop hobby;

```



## 1.10 ä¿®æ”¹è¡¨å±æ€§

### ä¿®æ”¹è¡¨å

```
alter table students rename to new_students;

```

### ä¿®æ”¹è¡¨ç»“æ„ï¼Œæ•°æ®åº“å¼•æ“

```
create table t1(id int) engine=MYISAM;

alter table t1 engine=innodb;


```



### ä¿®æ”¹è¡¨ç»“æ„ï¼Œè¡¨å­—ç¬¦é›†

```
alter table t1 charset=latin1;


```

## 1.11 ä¿®æ”¹åˆ—å±æ€§

åŸºäºç›®å‰åˆ›å»ºçš„studentsè¡¨ï¼Œé»˜è®¤å®šä¹‰å¥½äº†å¾ˆå¤šçš„å­—æ®µï¼Œå­—æ®µçš„å±æ€§ä¹Ÿå¯ä»¥ä¿®æ”¹ã€‚

### changeå…³é”®å­—

```
ALTER TABLE <è¡¨å> CHANGE <æ—§å­—æ®µå> <æ–°å­—æ®µå> <æ–°æ•°æ®ç±»å‹>ï¼›

æ—§å­—æ®µåï¼šæŒ‡ä¿®æ”¹å‰çš„å­—æ®µåï¼›
æ–°å­—æ®µåï¼šæŒ‡ä¿®æ”¹åçš„å­—æ®µåï¼›
æ–°æ•°æ®ç±»å‹ï¼šæŒ‡ä¿®æ”¹åçš„æ•°æ®ç±»å‹ï¼Œå¦‚æœä¸éœ€è¦ä¿®æ”¹å­—æ®µçš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥å°†æ–°æ•°æ®ç±»å‹è®¾ç½®æˆä¸åŸæ¥ä¸€æ ·ï¼Œä½†æ•°æ®ç±»å‹ä¸èƒ½ä¸ºç©ºã€‚

CHANGE ä¹Ÿå¯ä»¥åªä¿®æ”¹æ•°æ®ç±»å‹ï¼Œå®ç°å’Œ MODIFY åŒæ ·çš„æ•ˆæœï¼Œæ–¹æ³•æ˜¯å°† SQL è¯­å¥ä¸­çš„â€œæ–°å­—æ®µåâ€å’Œâ€œæ—§å­—æ®µåâ€è®¾ç½®ä¸ºç›¸åŒçš„åç§°ï¼Œåªæ”¹å˜â€œæ•°æ®ç±»å‹â€ã€‚

æç¤ºï¼šç”±äºä¸åŒç±»å‹çš„æ•°æ®åœ¨æœºå™¨ä¸­çš„å­˜å‚¨æ–¹å¼åŠé•¿åº¦å¹¶ä¸ç›¸åŒï¼Œä¿®æ”¹æ•°æ®ç±»å‹å¯èƒ½ä¼šå½±å“æ•°æ®è¡¨ä¸­å·²æœ‰çš„æ•°æ®è®°å½•ï¼Œå› æ­¤ï¼Œå½“æ•°æ®è¡¨ä¸­å·²ç»æœ‰æ•°æ®æ—¶ï¼Œä¸è¦è½»æ˜“ä¿®æ”¹æ•°æ®ç±»å‹

```

### åªä¿®æ”¹å­—æ®µå

```
mysql> alter table stu_back change phone_num telephone_num varchar(11) NOT NULL DEFAULT '0' COMMENT 'æ‰‹æœºå·';
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

```

### åªä¿®æ”¹é»˜è®¤å€¼

```
mysql> alter table stu_back change telephone_num telephone_num varchar(11) NOT NULL DEFAULT '15210858004' COMMENT 'æ‰‹æœºå·';
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

```

### åŒæ—¶ä¿®æ”¹å­—æ®µåï¼Œå­—æ®µæ•°æ®ç±»å‹,é»˜è®¤å€¼

```
alter table stu_back change phone phone_num varchar(11) not null default '0' comment 'æ‰‹æœºå·';

```

## modifyå…³é”®å­—

```
ä¿®æ”¹å­—æ®µçš„æ•°æ®ç±»å‹å°±æ˜¯æŠŠå­—æ®µçš„æ•°æ®ç±»å‹è½¬æ¢æˆå¦ä¸€ç§æ•°æ®ç±»å‹ã€‚

åœ¨ MySQL ä¸­ä¿®æ”¹å­—æ®µæ•°æ®ç±»å‹çš„è¯­æ³•è§„åˆ™å¦‚ä¸‹ï¼š
ALTER TABLE <è¡¨å> MODIFY <å­—æ®µå> <æ•°æ®ç±»å‹>

å…¶ä¸­ï¼š
è¡¨åï¼šæŒ‡è¦ä¿®æ”¹æ•°æ®ç±»å‹çš„å­—æ®µæ‰€åœ¨è¡¨çš„åç§°ï¼›
å­—æ®µåï¼šæŒ‡éœ€è¦ä¿®æ”¹çš„å­—æ®µï¼›
æ•°æ®ç±»å‹ï¼šæŒ‡ä¿®æ”¹åå­—æ®µçš„æ–°æ•°æ®ç±»å‹ã€‚


ä¿®æ”¹telephone_numçš„æ•°æ®ç±»å‹ï¼Œæ”¹ä¸ºchar(11)

æ³¨æ„ï¼Œå¦‚æœå…¶ä»–å±æ€§ï¼Œä¸å¸Œæœ›æ”¹å˜ï¼Œä¹Ÿè¦åŠ ä¸Šï¼Œå¦åˆ™å°±ä¸¢å¤±äº†

mysql> alter table stu_back modify telephone_num char(11) not null;
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0

```

## 1.12 åˆ é™¤æ•°æ®è¡¨

å±é™©æ“ä½œ

```
mysql> drop table stu_back;
Query OK, 0 rows affected (0.00 sec)

```



# ä»Šæ—¥ä½œä¸š

```
1. ä»Šå¤©æ‰€å­¦ï¼Œä¸»è¦æ˜¯æ•°æ®åº“çš„ï¼Œåº“ã€è¡¨ï¼Œå¦‚ä½•åˆ›å»ºï¼Œä»¥åŠè¡¨çš„æ•°æ®å­—æ®µï¼Œæ•°æ®ç±»å‹ç†è®º

2. å…³äºSQLçš„å®è·µï¼Œä»¥DDLæ•°æ®åº“å®šä¹‰ï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºã€åˆ é™¤ã€ä¿®æ”¹æ•°æ®åº“ã€è¡¨ã€çš„å„ç§SQLå­¦ä¹ ï¼ŒçŸ¥è¯†ç‚¹æ¯”è¾ƒç»†ï¼Œå…ˆçœ‹æ‡‚è¯­æ³•ï¼Œæ‡‚äº†ç»ƒä¹ ï¼Œåšå¥½ç¬”è®°å°±è¡Œï¼Œæ…¢æ…¢è®°å¿†å³å¯ï¼Œé‡è§å·¥ä½œéœ€æ±‚ï¼Œå¦‚éœ€è¦ä¿®æ”¹è¡¨ç»“æ„ï¼Œä¿®æ”¹å­—æ®µçš„é»˜è®¤å€¼ï¼ŒæŸ¥é˜…ç¬”è®°å³å¯ï¼Œå­°èƒ½ç”Ÿå·§ã€‚



```

